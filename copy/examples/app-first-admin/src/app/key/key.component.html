<div class="container-fluid pt-3 design-factory-v2">
  <div class="row align-items-end">
    <div class="col flex-grow-0 flex-shrink-0 d-flex align-items-end">
      <p-form-group class="mr-4"><a (click)="setDictionary(null, null, null, null)" class="btn btn-sm btn-danger" href="javascript:void(0)" [pOpenModal]="modalEdit">New</a></p-form-group>
      <ngb-pagination (pageChange)="loadPage($event)" [(page)]="page" [(collectionSize)]="totalItems" [pageSize]="itemsPerPage" [maxSize]="3" [rotate]="true" [boundaryLinks]="true" size="sm"></ngb-pagination>
    </div>
    <div class="col flex-grow-1 flex-shrink-0 d-flex justify-content-end align-items-end">
      <p-form-group label="Key:">
        <input pFormControlInput [(ngModel)]="name" (ngModelChange)="loadTotal($event);loadPage($event)" type="text" id="name" name="name">
      </p-form-group>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <table class="table table-hover">
        <thead class="thead-dark">
          <tr>
            <th class="w-0 text-left" scope="col"></th>
            <th class="w-0 text-center" scope="col"><a class="text-white" (click)="changeOrder('id');loadPage(sort='id')" href="javascript:void(0)"><small *ngIf="sort === 'id'" [ngClass]="{'icon-arrow-down': (order === 'asc'), 'icon-arrow-up': (order !== 'asc')}" class="table-sort-icon position-absolute"></small>ID</a></th>
            <th class="w-100" scope="col"><a class="text-white" (click)="changeOrder('name');loadPage(sort='name')" href="javascript:void(0)"><small *ngIf="sort === 'name'" [ngClass]="{'icon-arrow-down': (order === 'asc'), 'icon-arrow-up': (order !== 'asc')}" class="table-sort-icon position-absolute"></small>Key</a></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let key of keys" class="col">
            <td class="text-left"><a (click)="setDictionary(key.id, key.name, key.lang, key.namelang)" class="icon-pencil" href="javascript:void(0)" [pOpenModal]="modalEdit"></a></td>
            <td class="text-center">{{ key.id }}</td>
            <td>{{ key.name }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row align-items-end">
    <div class="col-6 d-flex align-items-end">
      <p-form-group class="mr-4"><a (click)="setDictionary(null, null, null, null)" class="btn btn-sm btn-danger" href="javascript:void(0)" [pOpenModal]="modalEdit">New</a></p-form-group>
      <ngb-pagination (pageChange)="loadPage($event)" [(page)]="page" [collectionSize]="totalItems" [pageSize]="itemsPerPage" [maxSize]="3" [rotate]="true" [boundaryLinks]="true" size="sm"></ngb-pagination>
    </div>
  </div>
</div>
<ng-template #modalEdit let-c="close" let-d="dismiss">
  <p-modal (dismiss)="d($event)" title="Edit Key" [dismissible]="true">
    <form [formGroup]="dictionaryForm" (ngSubmit)="onSubmit()">
      <p-form-group *ngIf="currentID !== null" label="ID:">
        <input pFormControlInput type="text" id="modalID" [value]="currentID" [title]="currentID" readonly>
      </p-form-group>
      <p-form-group label="Key:">
        <input pFormControlInput type="text" id="modalName" formControlName="modalName" pattern=".*" [ngClass]="{ 'is-valid': !submitted || !f.modalName.errors, 'is-invalid': submitted && f.modalName.errors }" [value]="currentName" [title]="currentName">
        <div class="invalid-feedback" *ngIf="submitted && f.modalName.errors"><div *ngIf="f.modalName.errors.required">Please provide a valid key.</div></div>
      </p-form-group>
      <hr>
      <div class="d-flex justify-content-between">
        <p-form-group class="m-0"><button p-modal-button class="btn btn-sm btn-outline-primary" [disabled]="loading" (click)="c('close')">Cancel</button></p-form-group>
        <p-form-group class="m-0"><button p-modal-button class="btn btn-sm btn-primary" [disabled]="loading">Apply</button></p-form-group>
<!--        <p-form-group class="m-0"><button p-modal-button class="btn btn-sm btn-primary" (click)="c('save')" [disabled]="loading">Copy</button></p-form-group>-->
      </div>
    </form>
  </p-modal>
</ng-template>
